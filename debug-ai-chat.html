<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chat Debug Tool - è¨ºæ–­ãƒ„ãƒ¼ãƒ«</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #1a1a1a;
            color: #fff;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #FFD700;
            margin-bottom: 10px;
            font-size: 32px;
        }
        .subtitle {
            color: #aaa;
            margin-bottom: 30px;
            font-size: 14px;
        }
        .section {
            background: #2a2a2a;
            border: 2px solid #333;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .section-title {
            color: #FFD700;
            font-size: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .code-block {
            background: #000;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            overflow-x: auto;
            position: relative;
        }
        .code-block pre {
            color: #0f0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #FFD700;
            color: #000;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
        }
        .copy-btn:hover {
            background: #FFC700;
        }
        .step {
            background: #333;
            border-left: 4px solid #FFD700;
            padding: 15px;
            margin: 10px 0;
        }
        .step-number {
            color: #FFD700;
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 8px;
        }
        .warning {
            background: #ff4444;
            color: #fff;
            padding: 10px 15px;
            border-radius: 4px;
            margin: 10px 0;
            font-weight: 600;
        }
        .success {
            background: #00cc66;
            color: #fff;
            padding: 10px 15px;
            border-radius: 4px;
            margin: 10px 0;
            font-weight: 600;
        }
        .info {
            background: #0088ff;
            color: #fff;
            padding: 10px 15px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .checklist {
            list-style: none;
            padding-left: 0;
        }
        .checklist li {
            padding: 8px 0;
            padding-left: 30px;
            position: relative;
        }
        .checklist li:before {
            content: 'â˜';
            position: absolute;
            left: 0;
            color: #FFD700;
            font-size: 20px;
        }
        .icon {
            display: inline-block;
            width: 24px;
            height: 24px;
            background: #FFD700;
            color: #000;
            text-align: center;
            line-height: 24px;
            border-radius: 50%;
            font-weight: 700;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        th, td {
            border: 1px solid #444;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #000;
            color: #FFD700;
            font-weight: 600;
        }
        td {
            background: #2a2a2a;
        }
        .expected { color: #0f0; }
        .actual-error { color: #f00; }
        .highlight { background: #FFD700; color: #000; padding: 2px 6px; border-radius: 2px; font-weight: 600; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” AI Chat & Checklist ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«</h1>
        <p class="subtitle">ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ï¼ˆF12ï¼‰ã§å®Ÿè¡Œã—ã¦å•é¡Œã‚’è¨ºæ–­ã—ã¾ã™</p>

        <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³1: åŸºæœ¬è¨ºæ–­ -->
        <div class="section">
            <div class="section-title">
                <span class="icon">1</span>
                åŸºæœ¬è¨­å®šã®ç¢ºèªï¼ˆCONFIG ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰
            </div>
            <p>ã¾ãšã€ãƒšãƒ¼ã‚¸ã«å¿…è¦ãªè¨­å®šãŒæ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚</p>
            
            <div class="step">
                <div class="step-number">Step 1.1: CONFIG ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç¢ºèª</div>
                <p>è£œåŠ©é‡‘è©³ç´°ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ï¼ˆF12ï¼‰ã«ä»¥ä¸‹ã‚’è²¼ã‚Šä»˜ã‘ã¦ Enterï¼š</p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">ã‚³ãƒ”ãƒ¼</button>
                    <pre>// CONFIG ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ç¢ºèª
console.log('%c=== CONFIG è¨ºæ–­ ===', 'color: #FFD700; font-size: 18px; font-weight: bold;');
console.log('CONFIG exists:', typeof CONFIG !== 'undefined');
if (typeof CONFIG !== 'undefined') {
    console.log('âœ… CONFIG:', CONFIG);
    console.log('  - postId:', CONFIG.postId);
    console.log('  - ajaxUrl:', CONFIG.ajaxUrl);
    console.log('  - nonce:', CONFIG.nonce);
    console.log('  - nonce length:', CONFIG.nonce ? CONFIG.nonce.length : 0);
} else {
    console.error('âŒ CONFIG ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼');
}</pre>
                </div>
            </div>

            <div class="info">
                <strong>æœŸå¾…ã•ã‚Œã‚‹çµæœ:</strong><br>
                âœ… CONFIG exists: true<br>
                âœ… postId: [æ•°å­—] (ä¾‹: 12345)<br>
                âœ… ajaxUrl: "/wp-admin/admin-ajax.php"<br>
                âœ… nonce: [10æ–‡å­—ã®æ–‡å­—åˆ—] (ä¾‹: "a1b2c3d4e5")<br>
                âœ… nonce length: 10
            </div>
        </div>

        <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³2: AJAX ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ†ã‚¹ãƒˆ -->
        <div class="section">
            <div class="section-title">
                <span class="icon">2</span>
                AI Chat AJAX ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ†ã‚¹ãƒˆ
            </div>
            
            <div class="step">
                <div class="step-number">Step 2.1: æ‰‹å‹•AJAXãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡</div>
                <p>å®Ÿéš›ã®AI Chatãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ‰‹å‹•ã§é€ä¿¡ã—ã¦ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç¢ºèªã—ã¾ã™ï¼š</p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">ã‚³ãƒ”ãƒ¼</button>
                    <pre>// AI Chat AJAX ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ†ã‚¹ãƒˆ
console.log('%c=== AI Chat AJAX ãƒ†ã‚¹ãƒˆ ===', 'color: #FFD700; font-size: 18px; font-weight: bold;');

if (typeof CONFIG === 'undefined') {
    console.error('âŒ CONFIG ãŒæœªå®šç¾©ã§ã™ã€‚ã¾ãš Step 1 ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚');
} else {
    const formData = new FormData();
    formData.append('action', 'gi_ai_chat');
    formData.append('nonce', CONFIG.nonce);
    formData.append('post_id', CONFIG.postId);
    formData.append('question', 'ãƒ†ã‚¹ãƒˆè³ªå•ã§ã™');

    console.log('ğŸ“¤ é€ä¿¡ãƒ‡ãƒ¼ã‚¿:');
    console.log('  - action: gi_ai_chat');
    console.log('  - nonce:', CONFIG.nonce);
    console.log('  - post_id:', CONFIG.postId);
    console.log('  - question: ãƒ†ã‚¹ãƒˆè³ªå•ã§ã™');
    console.log('  - URL:', CONFIG.ajaxUrl);
    
    fetch(CONFIG.ajaxUrl, {
        method: 'POST',
        body: formData
    })
    .then(response => {
        console.log('%cğŸ“¥ ãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡', 'color: #0f0; font-weight: bold;');
        console.log('  - Status:', response.status);
        console.log('  - Status Text:', response.statusText);
        console.log('  - OK:', response.ok);
        
        if (!response.ok) {
            console.error('âŒ HTTP ã‚¨ãƒ©ãƒ¼! Status:', response.status);
        }
        return response.text();
    })
    .then(text => {
        console.log('%cğŸ“„ Raw Response:', 'color: #0ff; font-weight: bold;');
        console.log(text);
        
        try {
            const data = JSON.parse(text);
            console.log('%câœ… JSON Parse æˆåŠŸ:', 'color: #0f0; font-weight: bold;');
            console.log(data);
            
            if (data.success) {
                console.log('%cğŸ‰ SUCCESS!', 'color: #0f0; font-size: 16px; font-weight: bold;');
                console.log('  - Answer:', data.data.answer);
                if (data.data.source) console.log('  - Source:', data.data.source);
            } else {
                console.error('%câŒ AJAX ã‚¨ãƒ©ãƒ¼', 'color: #f00; font-weight: bold;');
                console.error('  - Message:', data.data ? data.data.message : 'Unknown error');
                console.error('  - Full data:', data);
            }
        } catch (e) {
            console.error('âŒ JSON Parse ã‚¨ãƒ©ãƒ¼:', e);
            console.error('ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒJSONã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä¸Šè¨˜ã® Raw Response ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
        }
    })
    .catch(error => {
        console.error('%câŒ Network ã‚¨ãƒ©ãƒ¼', 'color: #f00; font-weight: bold;');
        console.error(error);
    });
}</pre>
                </div>
            </div>
        </div>

        <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³3: Nonce æ¤œè¨¼ -->
        <div class="section">
            <div class="section-title">
                <span class="icon">3</span>
                Nonce ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯è¨ºæ–­
            </div>
            
            <div class="step">
                <div class="step-number">Step 3.1: Nonce è©³ç´°è¨ºæ–­</div>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">ã‚³ãƒ”ãƒ¼</button>
                    <pre>// Nonce è¨ºæ–­
console.log('%c=== Nonce è¨ºæ–­ ===', 'color: #FFD700; font-size: 18px; font-weight: bold;');

if (typeof CONFIG !== 'undefined' && CONFIG.nonce) {
    console.log('âœ… Nonce å­˜åœ¨: ', CONFIG.nonce);
    console.log('âœ… Nonce é•·ã•: ', CONFIG.nonce.length);
    console.log('âœ… Nonce ã‚¿ã‚¤ãƒ—: ', typeof CONFIG.nonce);
    
    // Nonce ã®æœ‰åŠ¹æ€§ãƒã‚§ãƒƒã‚¯ï¼ˆç°¡æ˜“ç‰ˆï¼‰
    if (CONFIG.nonce.length === 10) {
        console.log('âœ… Nonce é•·ã•ã¯æ­£å¸¸ã§ã™ (10æ–‡å­—)');
    } else {
        console.warn('âš ï¸ Nonce é•·ã•ãŒç•°å¸¸ã§ã™ã€‚æœŸå¾…: 10æ–‡å­—, å®Ÿéš›:', CONFIG.nonce.length);
    }
    
    if (/^[a-zA-Z0-9]+$/.test(CONFIG.nonce)) {
        console.log('âœ… Nonce ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯æ­£å¸¸ã§ã™ (è‹±æ•°å­—ã®ã¿)');
    } else {
        console.warn('âš ï¸ Nonce ã«ä¸æ­£ãªæ–‡å­—ãŒå«ã¾ã‚Œã¦ã„ã¾ã™');
    }
    
    // Nonce åã®ç¢ºèªï¼ˆãƒšãƒ¼ã‚¸ã‚½ãƒ¼ã‚¹ã‹ã‚‰ï¼‰
    console.log('%cğŸ“„ ãƒšãƒ¼ã‚¸ã‚½ãƒ¼ã‚¹ã‹ã‚‰ Nonce ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèª:', 'color: #0ff;');
    console.log('ãƒšãƒ¼ã‚¸ã® HTML ã‚½ãƒ¼ã‚¹ã‚’è¡¨ç¤ºã—ã¦ã€ä»¥ä¸‹ã‚’æ¤œç´¢ã—ã¦ãã ã•ã„:');
    console.log('  1. "wp_create_nonce" ã§æ¤œç´¢');
    console.log('  2. ä½•ã¨ã„ã†åå‰ã§ç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª');
    console.log('  3. "gi_ai_nonce" ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª');
    
} else {
    console.error('âŒ Nonce ãŒå­˜åœ¨ã—ã¾ã›ã‚“ï¼');
    console.error('CONFIG.nonce:', typeof CONFIG !== 'undefined' ? CONFIG.nonce : 'CONFIG æœªå®šç¾©');
}</pre>
                </div>
            </div>
        </div>

        <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³4: PHP ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª -->
        <div class="section">
            <div class="section-title">
                <span class="icon">4</span>
                ã‚µãƒ¼ãƒãƒ¼å´ï¼ˆPHPï¼‰ã®ã‚¨ãƒ©ãƒ¼ç¢ºèª
            </div>
            
            <div class="step">
                <div class="step-number">Step 4.1: WordPress AJAX ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç¢ºèª</div>
                <p>WordPressã®AJAXã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒæ­£ã—ãå‹•ä½œã—ã¦ã„ã‚‹ã‹ç¢ºèªï¼š</p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">ã‚³ãƒ”ãƒ¼</button>
                    <pre>// WordPress AJAX ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç¢ºèª
console.log('%c=== AJAX ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç¢ºèª ===', 'color: #FFD700; font-size: 18px; font-weight: bold;');

if (typeof CONFIG !== 'undefined') {
    const testUrl = CONFIG.ajaxUrl + '?action=gi_ai_chat';
    console.log('ãƒ†ã‚¹ãƒˆURL:', testUrl);
    
    fetch(testUrl, { method: 'GET' })
        .then(r => {
            console.log('âœ… ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«åˆ°é”å¯èƒ½');
            console.log('Status:', r.status);
            return r.text();
        })
        .then(text => {
            console.log('Response:', text);
            if (text.includes('-1')) {
                console.warn('âš ï¸ WordPress ã¯ -1 ã‚’è¿”ã—ã¦ã„ã¾ã™ï¼ˆNonce ã‚¨ãƒ©ãƒ¼ã®å¯èƒ½æ€§ï¼‰');
            }
        })
        .catch(e => {
            console.error('âŒ ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«åˆ°é”ã§ãã¾ã›ã‚“:', e);
        });
} else {
    console.error('âŒ CONFIG ãŒæœªå®šç¾©ã§ã™');
}</pre>
                </div>
            </div>

            <div class="warning">
                <strong>âš ï¸ ã‚µãƒ¼ãƒãƒ¼å´ã®ãƒ­ã‚°ç¢ºèªãŒå¿…è¦ãªå ´åˆ:</strong><br>
                SSH ã§ã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š<br>
                <code style="background: #000; padding: 2px 6px; border-radius: 3px; font-family: monospace;">
                    tail -f /path/to/wordpress/wp-content/debug.log
                </code>
            </div>
        </div>

        <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³5: ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ CSS è¨ºæ–­ -->
        <div class="section">
            <div class="section-title">
                <span class="icon">5</span>
                ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆè¡¨ç¤ºã®è¨ºæ–­
            </div>
            
            <div class="step">
                <div class="step-number">Step 5.1: ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆè¦ç´ ã®ã‚¹ã‚¿ã‚¤ãƒ«ç¢ºèª</div>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">ã‚³ãƒ”ãƒ¼</button>
                    <pre>// ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ CSS è¨ºæ–­
console.log('%c=== ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆè¨ºæ–­ ===', 'color: #FFD700; font-size: 18px; font-weight: bold;');

const checklistTitle = document.querySelector('.gi-checklist-title');
const categoryHeaders = document.querySelectorAll('.gi-checklist-category-header');

if (checklistTitle) {
    console.log('âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚¿ã‚¤ãƒˆãƒ«ç™ºè¦‹');
    const styles = window.getComputedStyle(checklistTitle);
    console.log('ç¾åœ¨ã®ã‚¹ã‚¿ã‚¤ãƒ«:');
    console.log('  - color:', styles.color);
    console.log('  - background:', styles.backgroundColor);
    console.log('  - font-weight:', styles.fontWeight);
    console.log('  - display:', styles.display);
    
    const rgb = styles.color.match(/\d+/g);
    if (rgb) {
        const [r, g, b] = rgb.map(Number);
        const hex = '#' + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('');
        console.log('  - color (HEX):', hex);
        
        if (hex.toLowerCase() === '#ffffff' || (r > 200 && g > 200 && b > 200)) {
            console.log('%câœ… ã‚¿ã‚¤ãƒˆãƒ«ã¯ç™½è‰²ã§ã™ï¼', 'color: #0f0; font-weight: bold;');
        } else {
            console.error('%câŒ ã‚¿ã‚¤ãƒˆãƒ«ãŒç™½è‰²ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼', 'color: #f00; font-weight: bold;');
            console.error('æœŸå¾…: #ffffff, å®Ÿéš›:', hex);
        }
    }
    
    // ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã®ç¢ºèª
    console.log('ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«:', checklistTitle.getAttribute('style'));
} else {
    console.error('âŒ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚¿ã‚¤ãƒˆãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
}

console.log('\n--- ã‚«ãƒ†ã‚´ãƒªãƒ˜ãƒƒãƒ€ãƒ¼ç¢ºèª ---');
if (categoryHeaders.length > 0) {
    console.log(`âœ… ${categoryHeaders.length} å€‹ã®ã‚«ãƒ†ã‚´ãƒªãƒ˜ãƒƒãƒ€ãƒ¼ç™ºè¦‹`);
    categoryHeaders.forEach((header, i) => {
        const styles = window.getComputedStyle(header);
        console.log(`ã‚«ãƒ†ã‚´ãƒª ${i + 1}:`, header.textContent.trim());
        console.log('  - color:', styles.color);
        console.log('  - background:', styles.backgroundColor);
        console.log('  - inline style:', header.getAttribute('style'));
    });
} else {
    console.error('âŒ ã‚«ãƒ†ã‚´ãƒªãƒ˜ãƒƒãƒ€ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
}</pre>
                </div>
            </div>
        </div>

        <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³6: å®Œå…¨è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆ -->
        <div class="section">
            <div class="section-title">
                <span class="icon">6</span>
                ğŸ¯ å®Œå…¨è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆï¼ˆå…¨éƒ¨å®Ÿè¡Œï¼‰
            </div>
            
            <div class="step">
                <div class="step-number">Step 6.1: ä¸€æ‹¬è¨ºæ–­ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</div>
                <p><strong>ã™ã¹ã¦ã®è¨ºæ–­ã‚’ä¸€åº¦ã«å®Ÿè¡Œã—ã¾ã™ã€‚ã“ã‚Œã‚’å®Ÿè¡Œã™ã‚Œã°å•é¡Œã®ç‰¹å®šãŒç°¡å˜ã«ãªã‚Šã¾ã™ï¼</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">ã‚³ãƒ”ãƒ¼</button>
                    <pre>// ğŸ¯ AI Chat & Checklist å®Œå…¨è¨ºæ–­
(async function() {
    console.clear();
    console.log('%câ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—', 'color: #FFD700;');
    console.log('%câ•‘   AI Chat & Checklist å®Œå…¨è¨ºæ–­ãƒ¬ãƒãƒ¼ãƒˆ       â•‘', 'color: #FFD700; font-size: 16px; font-weight: bold;');
    console.log('%câ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'color: #FFD700;');
    console.log('');
    
    let errors = [];
    let warnings = [];
    let success = [];
    
    // 1. CONFIG ãƒã‚§ãƒƒã‚¯
    console.log('%c[1/6] CONFIG ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç¢ºèª', 'color: #0ff; font-weight: bold;');
    if (typeof CONFIG === 'undefined') {
        errors.push('CONFIG ãŒæœªå®šç¾©');
        console.error('âŒ CONFIG ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼');
    } else {
        success.push('CONFIG å®šç¾©æ¸ˆã¿');
        console.log('âœ… CONFIG:', CONFIG);
        
        if (!CONFIG.nonce) {
            errors.push('CONFIG.nonce ãŒç©º');
        } else if (CONFIG.nonce.length !== 10) {
            warnings.push(`Nonce é•·ã•ç•°å¸¸ (${CONFIG.nonce.length}æ–‡å­—)`);
        } else {
            success.push('Nonce æ­£å¸¸');
        }
        
        if (!CONFIG.ajaxUrl) {
            errors.push('CONFIG.ajaxUrl ãŒç©º');
        } else {
            success.push('ajaxUrl æ­£å¸¸');
        }
        
        if (!CONFIG.postId) {
            errors.push('CONFIG.postId ãŒç©º');
        } else {
            success.push('postId æ­£å¸¸');
        }
    }
    console.log('');
    
    // 2. AJAX ãƒ†ã‚¹ãƒˆ
    if (typeof CONFIG !== 'undefined' && CONFIG.nonce) {
        console.log('%c[2/6] AJAX ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ†ã‚¹ãƒˆ', 'color: #0ff; font-weight: bold;');
        try {
            const formData = new FormData();
            formData.append('action', 'gi_ai_chat');
            formData.append('nonce', CONFIG.nonce);
            formData.append('post_id', CONFIG.postId);
            formData.append('question', 'è¨ºæ–­ãƒ†ã‚¹ãƒˆ');
            
            const response = await fetch(CONFIG.ajaxUrl, {
                method: 'POST',
                body: formData
            });
            
            console.log('HTTP Status:', response.status);
            
            const text = await response.text();
            console.log('Raw Response:', text.substring(0, 200));
            
            try {
                const data = JSON.parse(text);
                if (data.success) {
                    success.push('AJAX ãƒªã‚¯ã‚¨ã‚¹ãƒˆæˆåŠŸ');
                    console.log('%câœ… AJAX æˆåŠŸ!', 'color: #0f0; font-weight: bold;');
                    console.log('Response:', data);
                } else {
                    errors.push(`AJAX ã‚¨ãƒ©ãƒ¼: ${data.data ? data.data.message : 'Unknown'}`);
                    console.error('%câŒ AJAX å¤±æ•—:', 'color: #f00; font-weight: bold;');
                    console.error('Error:', data.data);
                }
            } catch (e) {
                errors.push('JSON Parse ã‚¨ãƒ©ãƒ¼');
                console.error('âŒ JSON Parse å¤±æ•—:', e);
            }
        } catch (e) {
            errors.push(`Network ã‚¨ãƒ©ãƒ¼: ${e.message}`);
            console.error('âŒ Network ã‚¨ãƒ©ãƒ¼:', e);
        }
    } else {
        console.log('%c[2/6] AJAX ãƒ†ã‚¹ãƒˆã‚¹ã‚­ãƒƒãƒ—ï¼ˆCONFIG æœªå®šç¾©ï¼‰', 'color: #f90; font-weight: bold;');
    }
    console.log('');
    
    // 3. ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚¿ã‚¤ãƒˆãƒ«
    console.log('%c[3/6] ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚¿ã‚¤ãƒˆãƒ«ç¢ºèª', 'color: #0ff; font-weight: bold;');
    const title = document.querySelector('.gi-checklist-title');
    if (title) {
        const color = window.getComputedStyle(title).color;
        const rgb = color.match(/\d+/g);
        if (rgb) {
            const [r, g, b] = rgb.map(Number);
            const hex = '#' + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('');
            console.log('è‰²:', hex);
            if (r > 200 && g > 200 && b > 200) {
                success.push('ã‚¿ã‚¤ãƒˆãƒ«ç™½è‰²è¡¨ç¤º');
                console.log('âœ… ã‚¿ã‚¤ãƒˆãƒ«ã¯ç™½è‰²');
            } else {
                errors.push(`ã‚¿ã‚¤ãƒˆãƒ«è‰²ãŒé»’: ${hex}`);
                console.error('âŒ ã‚¿ã‚¤ãƒˆãƒ«ãŒç™½è‰²ã§ã¯ãªã„:', hex);
            }
        }
    } else {
        warnings.push('ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚¿ã‚¤ãƒˆãƒ«è¦ç´ ãªã—');
        console.warn('âš ï¸ ã‚¿ã‚¤ãƒˆãƒ«è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
    }
    console.log('');
    
    // 4. ã‚«ãƒ†ã‚´ãƒªãƒ˜ãƒƒãƒ€ãƒ¼
    console.log('%c[4/6] ã‚«ãƒ†ã‚´ãƒªãƒ˜ãƒƒãƒ€ãƒ¼ç¢ºèª', 'color: #0ff; font-weight: bold;');
    const headers = document.querySelectorAll('.gi-checklist-category-header');
    console.log(`ç™ºè¦‹: ${headers.length} å€‹`);
    headers.forEach((h, i) => {
        const color = window.getComputedStyle(h).color;
        const rgb = color.match(/\d+/g);
        if (rgb) {
            const [r, g, b] = rgb.map(Number);
            if (r > 200 && g > 200 && b > 200) {
                console.log(`âœ… ãƒ˜ãƒƒãƒ€ãƒ¼ ${i+1}: ç™½è‰²`);
            } else {
                const hex = '#' + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('');
                console.error(`âŒ ãƒ˜ãƒƒãƒ€ãƒ¼ ${i+1}: ${hex}`);
                warnings.push(`ãƒ˜ãƒƒãƒ€ãƒ¼ ${i+1} ãŒé»’`);
            }
        }
    });
    console.log('');
    
    // 5. ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ç¢ºèª
    console.log('%c[5/6] AIå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç¢ºèª', 'color: #0ff; font-weight: bold;');
    const aiInput = document.getElementById('aiInput');
    const aiSend = document.getElementById('aiSend');
    if (aiInput) {
        success.push('AIå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å­˜åœ¨');
        console.log('âœ… AIå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç™ºè¦‹');
    } else {
        warnings.push('AIå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãªã—');
        console.warn('âš ï¸ AIå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
    }
    if (aiSend) {
        success.push('AIé€ä¿¡ãƒœã‚¿ãƒ³å­˜åœ¨');
        console.log('âœ… AIé€ä¿¡ãƒœã‚¿ãƒ³ç™ºè¦‹');
    } else {
        warnings.push('AIé€ä¿¡ãƒœã‚¿ãƒ³ãªã—');
        console.warn('âš ï¸ AIé€ä¿¡ãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
    }
    console.log('');
    
    // 6. æœ€çµ‚ãƒ¬ãƒãƒ¼ãƒˆ
    console.log('%c[6/6] è¨ºæ–­ã‚µãƒãƒªãƒ¼', 'color: #0ff; font-size: 16px; font-weight: bold;');
    console.log('');
    console.log('%câ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'color: #FFD700;');
    console.log('%câœ… æˆåŠŸ (' + success.length + ')', 'color: #0f0; font-weight: bold;');
    success.forEach(s => console.log('  âœ“', s));
    console.log('');
    
    if (warnings.length > 0) {
        console.log('%câš ï¸  è­¦å‘Š (' + warnings.length + ')', 'color: #f90; font-weight: bold;');
        warnings.forEach(w => console.warn('  âš ', w));
        console.log('');
    }
    
    if (errors.length > 0) {
        console.log('%câŒ ã‚¨ãƒ©ãƒ¼ (' + errors.length + ')', 'color: #f00; font-weight: bold;');
        errors.forEach(e => console.error('  âœ—', e));
        console.log('');
    }
    console.log('%câ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”', 'color: #FFD700;');
    console.log('');
    
    if (errors.length === 0 && warnings.length === 0) {
        console.log('%cğŸ‰ è¨ºæ–­å®Œäº†: ã™ã¹ã¦æ­£å¸¸ã§ã™ï¼', 'color: #0f0; font-size: 18px; font-weight: bold;');
    } else if (errors.length > 0) {
        console.log('%cğŸš¨ é‡å¤§ãªå•é¡ŒãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚ä¸Šè¨˜ã®ã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚', 'color: #f00; font-size: 16px; font-weight: bold;');
    } else {
        console.log('%câš ï¸  è­¦å‘ŠãŒã‚ã‚Šã¾ã™ãŒã€å‹•ä½œã«ã¯å•é¡Œãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚', 'color: #f90; font-size: 16px; font-weight: bold;');
    }
    console.log('');
    console.log('%cã“ã®çµæœã‚’ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã§é€ã£ã¦ãã ã•ã„ï¼', 'color: #FFD700; font-size: 14px; font-weight: bold;');
})();</pre>
                </div>
            </div>
            
            <div class="success">
                <strong>ğŸ‘† ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã€çµæœã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’é€ã£ã¦ãã ã•ã„ï¼</strong><br>
                ã™ã¹ã¦ã®å•é¡ŒãŒä¸€ç›®ã§ã‚ã‹ã‚Šã¾ã™ã€‚
            </div>
        </div>

        <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³7: ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° -->
        <div class="section">
            <div class="section-title">
                <span class="icon">7</span>
                ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–
            </div>
            
            <table>
                <tr>
                    <th>ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</th>
                    <th>åŸå› </th>
                    <th>è§£æ±ºç­–</th>
                </tr>
                <tr>
                    <td>CONFIG ãŒæœªå®šç¾©</td>
                    <td>JavaScriptãŒæ­£ã—ãèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„</td>
                    <td>ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ã€ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰</td>
                </tr>
                <tr>
                    <td>Nonce ãŒç©º</td>
                    <td>PHPã§NonceãŒç”Ÿæˆã•ã‚Œã¦ã„ãªã„</td>
                    <td>single-grant.php ã§ wp_create_nonce ç¢ºèª</td>
                </tr>
                <tr>
                    <td>HTTP Status 400/500</td>
                    <td>ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼</td>
                    <td>PHPã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèªã€debug.log ã‚’è¦‹ã‚‹</td>
                </tr>
                <tr>
                    <td>JSON Parse ã‚¨ãƒ©ãƒ¼</td>
                    <td>ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒJSONã§ãªã„ï¼ˆHTML/ã‚¨ãƒ©ãƒ¼ï¼‰</td>
                    <td>Raw Response ã‚’ç¢ºèªã€PHPã‚¨ãƒ©ãƒ¼ä¿®æ­£</td>
                </tr>
                <tr>
                    <td>ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯å¤±æ•—</td>
                    <td>Nonceæ¤œè¨¼ã‚¨ãƒ©ãƒ¼</td>
                    <td>NonceåãŒä¸€è‡´ã—ã¦ã„ã‚‹ã‹ç¢ºèªï¼ˆgi_ai_nonceï¼‰</td>
                </tr>
                <tr>
                    <td>ã‚¿ã‚¤ãƒˆãƒ«ãŒé»’è‰²</td>
                    <td>CSSå„ªå…ˆåº¦ã®å•é¡Œ</td>
                    <td>ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ç¢ºèªã€!important è¿½åŠ </td>
                </tr>
            </table>
        </div>
    </div>

    <script>
        function copyCode(btn) {
            const codeBlock = btn.nextElementSibling;
            const code = codeBlock.textContent;
            
            navigator.clipboard.writeText(code).then(() => {
                const originalText = btn.textContent;
                btn.textContent = 'ã‚³ãƒ”ãƒ¼å®Œäº†ï¼';
                btn.style.background = '#0f0';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '#FFD700';
                }, 2000);
            }).catch(err => {
                alert('ã‚³ãƒ”ãƒ¼å¤±æ•—: ' + err);
            });
        }
    </script>
</body>
</html>
